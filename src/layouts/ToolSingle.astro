---
import { humanize } from "@/lib/utils/textConverter";
import { Image } from "astro:assets";
import type { CollectionEntry } from "astro:content";

type Props = {
  tool: CollectionEntry<"tools">;
  Content: any;
};

const { tool, Content } = Astro.props;
const { title, description, image, category, featured } = tool.data;
---

<section class="section">
  <div class="container">
    <!-- Header -->
    <div class="text-center mb-8">
      <div class="flex items-center justify-center gap-2 mb-4">
        <span class="text-sm font-medium px-3 py-1 rounded-full bg-theme-light text-text">
          {humanize(category)}
        </span>
        {featured && (
          <span class="text-sm font-medium px-3 py-1 rounded-full bg-primary/10 text-primary">
            Featured
          </span>
        )}
      </div>
      <h1 class="h2 mb-4">{title}</h1>
      <p class="text-lg text-text max-w-2xl mx-auto">{description}</p>
    </div>

    <!-- Featured Image -->
    {image && (
      <div class="mb-8 rounded-lg overflow-hidden">
        <Image
          src={image}
          alt={title}
          width={1000}
          height={500}
          class="w-full"
        />
      </div>
    )}

    <!-- Interactive Tool Component (rendered via slot) -->
    <div class="mb-12">
      <slot name="tool-component" />
    </div>

    <!-- Markdown Content -->
    <div class="prose max-w-none mb-12">
      <Content />
    </div>

    <!-- Back Link -->
    <div class="text-center border-t border-border pt-8">
      <a
        href="/tools"
        class="inline-flex items-center text-primary hover:opacity-70 transition duration-300"
      >
        <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
        </svg>
        Back to all tools
      </a>
    </div>
  </div>
</section>
